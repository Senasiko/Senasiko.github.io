extends ./layout
block left
    #userMsg
block content
  .right-container
    #app
    #pagination
append script
  -
    var markdowns = [];
    for (var i = 0; i < pageSize; i ++)
      markdowns.push(mds[i]);
    markdowns = JSON.stringify(markdowns);
    var msgs = JSON.stringify(user.msgs);
  script(type="text/javascript").
    $(document).ready(function() {
      var list = window.vueCom.postList('#app', {
        mounted: function() {
          list.getRef().init(!{markdowns});
        }
      });

      var userMsg = window.vueCom.userMsg('#userMsg', {
          data: {
            img: '#{user.img}',
            msgs: !{msgs}
          }
        })

      var pagination = window.reactCom.pagination('#pagination', {
        defaultCurrent: #{page},
        total: #{total},
        pageSize: #{pageSize}
      })
    });

